# New features and improvements

* Added [EventCallback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.DevicesConnector.html#Melanchall_DryWetMidi_Devices_DevicesConnector_EventCallback) property to [DevicesConnector](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.DevicesConnector.html).
* Added [CutPart](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html#Melanchall_DryWetMidi_Tools_MidiFileSplitter_CutPart_Melanchall_DryWetMidi_Core_MidiFile_Melanchall_DryWetMidi_Interaction_ITimeSpan_Melanchall_DryWetMidi_Interaction_ITimeSpan_Melanchall_DryWetMidi_Tools_SliceMidiFileSettings_) method to [MidiFileSplitter](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Tools.MidiFileSplitter.html).
* Improved performance of `GetNotes`, `ProcessNotes` and `RemoveNotes` methods of [NotesManagingUtilities](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NotesManagingUtilities.html).
* Improved `GetChords`, `ProcessChords` and `RemoveChords` methods of [ChordsManagingUtilities](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordsManagingUtilities.html).
* Improved performance of ticks to metric timespan conversion (#129).
* Added [DeviceErrorOccurred](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_DeviceErrorOccurred) event to [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) (#121).
* Replaced [MidiClockSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiClockSettings.html) parameter by [PlaybackSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackSettings.html) in all playback creation methods and put [MidiClockSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiClockSettings.html) inside [PlaybackSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackSettings.html).
* Removed [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) constructors by [MidiEvent](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.MidiEvent.html)'s, added `GetPlayback` utility methods for [MidiEvent](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.MidiEvent.html)'s to ([with output device parameter](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackUtilities.html#Melanchall_DryWetMidi_Devices_PlaybackUtilities_GetPlayback_System_Collections_Generic_IEnumerable_Melanchall_DryWetMidi_Core_MidiEvent__Melanchall_DryWetMidi_Interaction_TempoMap_Melanchall_DryWetMidi_Devices_IOutputDevice_Melanchall_DryWetMidi_Devices_PlaybackSettings_) and [without it](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.PlaybackUtilities.html#Melanchall_DryWetMidi_Devices_PlaybackUtilities_GetPlayback_System_Collections_Generic_IEnumerable_Melanchall_DryWetMidi_Core_MidiEvent__Melanchall_DryWetMidi_Interaction_TempoMap_Melanchall_DryWetMidi_Devices_PlaybackSettings_)).
* Tracked data will be now sent by [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) when value of [TrackControlValue](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackControlValue), [TrackPitchValue](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackPitchValue) or [TrackProgram](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TrackProgram) changed to `true`.
* Added [IMetadata](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Common.IMetadata.html) interface.
* Added [TryPlayEvent](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_TryPlayEvent_Melanchall_DryWetMidi_Core_MidiEvent_System_Object_) and [GetTimedEvents](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html#Melanchall_DryWetMidi_Devices_Playback_GetTimedEvents_Melanchall_DryWetMidi_Interaction_ITimedObject_) `protected virtual` method to [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) (please see [Custom playback](https://melanchall.github.io/drywetmidi/articles/playback/Custom-playback.html) article).
* Added [EndOfTrackStoringPolicy](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.ReadingSettings.html#Melanchall_DryWetMidi_Core_ReadingSettings_EndOfTrackStoringPolicy) to [ReadingSettings](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.ReadingSettings.html) (#17).
* Added [Metadata](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiEventPlayedEventArgs.html#Melanchall_DryWetMidi_Devices_MidiEventPlayedEventArgs_Metadata) property to [MidiEventPlayedEventArgs](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.MidiEventPlayedEventArgs.html) (please see [Custom playback](https://melanchall.github.io/drywetmidi/articles/playback/Custom-playback.html) article).

# Small changes and bug fixes

* Made [TickGenerator.TickGenerated](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.TickGenerator.html#Melanchall_DryWetMidi_Devices_TickGenerator_TickGenerated) event `public`.
* Made [EndOfTrackEvent](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Core.EndOfTrackEvent.html) class `public` (#17).
* Removed `sealed` modifier from [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html).
* Removed `sealed` modifier from [TimedEvent](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.TimedEvent.html), [Note](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.Note.html) and [Chord](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.Chord.html) classes, made their `Clone` methods `virtual`.
* **Fixed:** Concurrent access to [Octave](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.MusicTheory.Octave.html) and [Note](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.MusicTheory.Note.html) caches is failed (#116).
* **Fixed:** [NoteSearchContext](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.NoteSearchContext.html) and [ChordSearchContext](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.ChordSearchContext.html) are not respected in `GetObjects` methods [for track chunks collection](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.GetObjectsUtilities.html#Melanchall_DryWetMidi_Interaction_GetObjectsUtilities_GetObjects_System_Collections_Generic_IEnumerable_Melanchall_DryWetMidi_Core_TrackChunk__Melanchall_DryWetMidi_Interaction_ObjectType_Melanchall_DryWetMidi_Interaction_ObjectDetectionSettings_) and [for MIDI file](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Interaction.GetObjectsUtilities.html#Melanchall_DryWetMidi_Interaction_GetObjectsUtilities_GetObjects_Melanchall_DryWetMidi_Core_MidiFile_Melanchall_DryWetMidi_Interaction_ObjectType_Melanchall_DryWetMidi_Interaction_ObjectDetectionSettings_).
* **Fixed:** Tracked data is sent by [Playback](https://melanchall.github.io/drywetmidi/api/Melanchall.DryWetMidi.Devices.Playback.html) when we jump to data change event.